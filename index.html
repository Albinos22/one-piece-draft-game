<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>One Piece Draft Game - Alban</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #0b1a2f; color: #f0e6d2; margin:0; padding:20px;
      display:flex; flex-direction:column; align-items:center; min-height:100vh; }
    h1 { color:#f2a900; margin-bottom:10px; text-shadow:1px 1px 3px #ffb500aa; }
    #draft-container { max-width:480px; width:100%; background:#142b4c; border-radius:12px;
      box-shadow:0 0 15px #0f1733cc; padding:15px; display:flex; flex-direction:column; gap:15px;}
    .cards { display:flex; justify-content:space-around; gap:10px; flex-wrap:nowrap; }
    .card { background:#1f3356; border-radius:8px; padding:10px; width:30%; cursor:pointer;
      user-select:none; box-shadow:0 0 6px #1f3356; transition:transform 0.2s, box-shadow 0.2s;
      display:flex; flex-direction:column; align-items:center; }
    .card:hover { transform:scale(1.08); box-shadow:0 0 15px #f2a900; }
    .card h3 { margin:8px 0 4px; color:#ffd86b; font-size:1.1em; text-align:center; }
    .card small { color:#c8c8c8; font-size:0.8em; text-align:center; }
    #teams { display:flex; justify-content:space-between; gap:15px; margin-top:10px; flex-wrap:wrap; }
    .team { background:#1a2a4c; border-radius:10px; padding:10px; flex:1 1 45%; min-width:200px;
      box-shadow:inset 0 0 10px #0a1641; }
    .team h2 { text-align:center; color:#f2a900; margin:0 0 10px; text-shadow:0 0 6px #f2a900aa; }
    .team-list { display:flex; flex-wrap:wrap; gap:8px; justify-content:center; }
    .team-card { background:#22477a; border-radius:6px; padding:8px 12px; min-width:90px;
      text-align:center; color:#ffeaa3; font-weight:600; box-shadow:0 0 6px #22477a; user-select:none;
      font-size:0.9em; }
    #post-title { text-align:center; font-weight:700; font-size:1.15em; margin-bottom:10px;
      color:#fff0b8; text-shadow:1px 1px 4px #aa7d00cc; }
    #btn-replay { margin-top:20px; padding:10px 25px; background:#f2a900; border:none; border-radius:20px;
      color:#0b1a2f; font-weight:700; font-size:1em; cursor:pointer; box-shadow:0 0 8px #f2a900aa;
      transition:background 0.3s; user-select:none; align-self:center; }
    #btn-replay:hover { background:#ffcc33; box-shadow:0 0 15px #ffcc33; }
    @media(max-width:480px){ .cards { flex-direction:column; } .card { width:100%; } #teams{flex-direction:column;} .team{min-width:100%;} }
  </style>
</head>
<body>
  <h1>One Piece Draft - Alban</h1>
  <div id="draft-container">
    <div id="post-title"></div>
    <div id="cards" class="cards"></div>
    <button id="btn-replay" style="display:none;">Rejouer</button>
    <div id="teams" style="display:none;">
      <div class="team"><h2>Ton équipage</h2><div class="team-list" id="player-list"></div></div>
      <div class="team"><h2>Équipage IA</h2><div class="team-list" id="ai-list"></div></div>
    </div>
  </div>

  <script>
  const postes = ["Capitaine","Épéiste","Navigateur","Tireur","Médecin","Charpentier","Archéologue","Cuisinier","Timonier","Musicien"];
  const arcs = ["East Blue","Alabasta","Skypiea","Enies Lobby","Guerre au Sommet","Île des Hommes-Poissons","Dressrosa","Whole Cake Island","Wano"];

  // Liste complète personnages avec propriété image à compléter
  const personnages = [
    // Luffy
{name:"Luffy", arc:"East Blue", image:"https://i.imgur.com/zxA7YpW.png"},
{name:"Luffy", arc:"Alabasta", image:"https://i.pinimg.com/474x/d6/13/ab/d613abe2275ef66a639be86ba62e4320.jpg"},
{name:"Luffy", arc:"Skypiea", image:"https://i.pinimg.com/736x/ca/0c/35/ca0c35fc447b88493a594a56a50d133f.jpg"},
{name:"Luffy", arc:"Enies Lobby", image:"https://i.redd.it/j56h948ak8y91.jpg"},
{name:"Luffy", arc:"Guerre au Sommet", image:"https://pbs.twimg.com/media/Go1b-OPWsAAPwFZ.jpg"},
{name:"Luffy", arc:"Île des Hommes-Poissons", image:"https://i.imgur.com/lBaJcIv.png"},
{name:"Luffy", arc:"Dressrosa", image:"https://i.pinimg.com/736x/33/04/11/33041192fe62429532f600dbdedcc12e.jpg"},
{name:"Luffy", arc:"Whole Cake Island", image:"https://preview.redd.it/vw0s36yltbh51.jpg"},
{name:"Luffy", arc:"Wano", image:"https://gw.alicdn.com/imgextra/i4/57110133/O1CN014OgnFY1CqxZXIWofD_!!57110133.jpg"},
    
    // Zoro
{name:"Zoro", arc:"East Blue", image:"https://i.imgur.com/dc3Mhby.jpeg"},
{name:"Zoro", arc:"Alabasta", image:"https://i.imgur.com/7EpueHp.jpeg"},
{name:"Zoro", arc:"Skypiea", image:"https://i.imgur.com/ZRqC5c1.jpeg"},
{name:"Zoro", arc:"Enies Lobby", image:"https://i.pinimg.com/474x/74/d3/0a/74d30a77712ffd98657a131d4883c2b8.jpg"},
{name:"Zoro", arc:"Île des Hommes-Poissons", image:"https://i.imgur.com/brssf0G.png"},
{name:"Zoro", arc:"Dressrosa", image:"https://i.pinimg.com/736x/29/cd/d5/29cdd57ecbc9a52d132d472d05c20bcf.jpg"},
{name:"Zoro", arc:"Wano", image:"https://i.pinimg.com/474x/b5/fa/bf/b5fabf632898400b6d6109c05a0d4394.jpg"},

    // Nami
    {name:"Nami", arc:"East Blue", image:"https://static.wikia.nocookie.net/onepiecexfairytail/images/3/35/Cha_nami.jpg"},
    {name:"Nami", arc:"Alabasta", image:"https://i.imgur.com/xF8uKq3.jpeg"},
    {name:"Nami", arc:"Skypiea", image:"https://static.wikia.nocookie.net/onepiecexfairytail/images/4/41/Nami1.jpg"},
    {name:"Nami", arc:"Enies Lobby", image:"https://i.imgur.com/omPYsuL.jpeg"},
    {name:"Nami", arc:"Île des Hommes-Poissons", image:"https://static.wikia.nocookie.net/heros/images/f/fb/Nami_Infobox.png/revision/latest/scale-to-width-down/1200?cb=20201007173416&path-prefix=fr"},
    {name:"Nami", arc:"Dressrosa", image:"https://i.pinimg.com/736x/7d/f1/26/7df126949b8fd7c7f6bce8f3cacc5f2d.jpg"},
    {name:"Nami", arc:"Whole Cake Island", image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSc7Z3VLf_jcxma54ShY-ksJEPVn31ZtBdDlw&s"},
    {name:"Nami", arc:"Wano", image:"https://pm1.aminoapps.com/7387/3234252916777beabf29b4310dd83735214f3b0dr1-472-650v2_hq.jpg"},

    // Usopp
    {name:"Usopp", arc:"East Blue", image:"https://i.imgur.com/B6z0Hta.jpeg"},
    {name:"Usopp", arc:"Alabasta", image:"https://i.imgur.com/pYhXmRX.jpeg"},
    {name:"Usopp", arc:"Skypiea", image:"https://i.imgur.com/WjJJzim.jpeg"},
    {name:"Usopp", arc:"Enies Lobby", image:"https://static.wikia.nocookie.net/p__/images/2/2d/Usopp_Anime_Sogeking.png/revision/latest?cb=20200821190158&path-prefix=protagonist"},
    {name:"Usopp", arc:"Île des Hommes-Poissons", image:"https://i.imgur.com/TXQPQp4.png"},
    {name:"Usopp", arc:"Dressrosa", image:"https://static.wikia.nocookie.net/onepiece/images/4/47/Usopp_Anime_Post_Ellipse_Infobox.png/revision/latest?cb=20141216165233&path-prefix=fr"},
    {name:"Usopp", arc:"Wano", image:"https://i.pinimg.com/564x/22/77/75/227775ad19bd1d296d5673bb248d5cd2.jpg"},

    // Sanji
    {name:"Sanji", arc:"East Blue", image:"image_url_ici"},
    {name:"Sanji", arc:"Alabasta", image:"image_url_ici"},
    {name:"Sanji", arc:"Skypiea", image:"image_url_ici"},
    {name:"Sanji", arc:"Enies Lobby", image:"image_url_ici"},
    {name:"Sanji", arc:"Guerre au Sommet", image:"image_url_ici"},
    {name:"Sanji", arc:"Île des Hommes-Poissons", image:"image_url_ici"},
    {name:"Sanji", arc:"Dressrosa", image:"image_url_ici"},
    {name:"Sanji", arc:"Whole Cake Island", image:"image_url_ici"},
    {name:"Sanji", arc:"Wano", image:"image_url_ici"},

    // Chopper
    {name:"Chopper", arc:"East Blue", image:"image_url_ici"},
    {name:"Chopper", arc:"Alabasta", image:"image_url_ici"},
    {name:"Chopper", arc:"Skypiea", image:"image_url_ici"},
    {name:"Chopper", arc:"Enies Lobby", image:"image_url_ici"},
    {name:"Chopper", arc:"Guerre au Sommet", image:"image_url_ici"},
    {name:"Chopper", arc:"Île des Hommes-Poissons", image:"image_url_ici"},
    {name:"Chopper", arc:"Dressrosa", image:"image_url_ici"},
    {name:"Chopper", arc:"Whole Cake Island", image:"image_url_ici"},
    {name:"Chopper", arc:"Wano", image:"image_url_ici"},

    // Robin
    {name:"Robin", arc:"East Blue", image:"image_url_ici"},
    {name:"Robin", arc:"Alabasta", image:"image_url_ici"},
    {name:"Robin", arc:"Skypiea", image:"image_url_ici"},
    {name:"Robin", arc:"Enies Lobby", image:"image_url_ici"},
    {name:"Robin", arc:"Guerre au Sommet", image:"image_url_ici"},
    {name:"Robin", arc:"Île des Hommes-Poissons", image:"image_url_ici"},
    {name:"Robin", arc:"Dressrosa", image:"image_url_ici"},
    {name:"Robin", arc:"Whole Cake Island", image:"image_url_ici"},
    {name:"Robin", arc:"Wano", image:"image_url_ici"},

    // Franky
    {name:"Franky", arc:"East Blue", image:"image_url_ici"},
    {name:"Franky", arc:"Alabasta", image:"image_url_ici"},
    {name:"Franky", arc:"Skypiea", image:"image_url_ici"},
    {name:"Franky", arc:"Enies Lobby", image:"image_url_ici"},
    {name:"Franky", arc:"Guerre au Sommet", image:"image_url_ici"},
    {name:"Franky", arc:"Île des Hommes-Poissons", image:"image_url_ici"},
    {name:"Franky", arc:"Dressrosa", image:"image_url_ici"},
    {name:"Franky", arc:"Whole Cake Island", image:"image_url_ici"},
    {name:"Franky", arc:"Wano", image:"image_url_ici"},

    // Jinbe
    {name:"Jinbe", arc:"East Blue", image:"image_url_ici"},
    {name:"Jinbe", arc:"Alabasta", image:"image_url_ici"},
    {name:"Jinbe", arc:"Skypiea", image:"image_url_ici"},
    {name:"Jinbe", arc:"Enies Lobby", image:"image_url_ici"},
    {name:"Jinbe", arc:"Guerre au Sommet", image:"image_url_ici"},
    {name:"Jinbe", arc:"Île des Hommes-Poissons", image:"image_url_ici"},
    {name:"Jinbe", arc:"Dressrosa", image:"image_url_ici"},
    {name:"Jinbe", arc:"Whole Cake Island", image:"image_url_ici"},
    {name:"Jinbe", arc:"Wano", image:"image_url_ici"},
  ];

  const choixParDraft = 3,
        nbMembres = postes.length;
  let etape = 0,
      dispo = [...personnages],
      player = [],
      ai = [];

  const postTitle = document.getElementById("post-title"),
        cardsContainer = document.getElementById("cards"),
        btnReplay = document.getElementById("btn-replay"),
        playerList = document.getElementById("player-list"),
        aiList = document.getElementById("ai-list"),
        teams = document.getElementById("teams");

  function tirer(arr, n) {
    const copy = [...arr], t = [];
    for(let i=0; i<n; i++) {
      if(!copy.length) break;
      const idx = Math.floor(Math.random() * copy.length);
      t.push(copy.splice(idx,1)[0]);
    }
    return t;
  }

  function afficherCartes() {
    postTitle.innerText = `Choisis ton ${postes[etape]} (${etape+1}/${nbMembres})`;
    cardsContainer.style.display = "flex";
    cardsContainer.innerHTML = "";
    const cartes = tirer(dispo, choixParDraft);
    cartes.forEach(c => {
      const d = document.createElement("div");
      d.className = "card";
      d.innerHTML = `
        <img src="${c.image}" alt="${c.name} ${c.arc}" style="width:80%; border-radius:8px; margin-bottom:8px;" />
        <h3>${c.name}</h3>
        <small>${c.arc}</small>
      `;
      d.onclick = () => choisir(c);
      cardsContainer.appendChild(d);
    });
  }

  function choisir(c) {
    player.push(c);
    dispo = dispo.filter(p => !(p.name === c.name && p.arc === c.arc));
    const choixIA = tirer(dispo, 1)[0];
    ai.push(choixIA);
    dispo = dispo.filter(p => !(p.name === choixIA.name && p.arc === choixIA.arc));
    etape++;
    if (etape >= nbMembres) fin();
    else afficherCartes();
  }

  function fin() {
    postTitle.innerText = "Draft terminée !";
    cardsContainer.style.display = "none";
    teams.style.display = "flex";
    btnReplay.style.display = "block";
    playerList.innerHTML = player.map(c => `<div class="team-card"><img src="${c.image}" alt="${c.name}" style="width:40px; vertical-align:middle; border-radius:5px; margin-right:6px;" />${c.name} (${c.arc})</div>`).join("");
    aiList.innerHTML = ai.map(c => `<div class="team-card"><img src="${c.image}" alt="${c.name}" style="width:40px; vertical-align:middle; border-radius:5px; margin-right:6px;" />${c.name} (${c.arc})</div>`).join("");
  }

  btnReplay.onclick = () => {
    etape = 0;
    dispo = [...personnages];
    player = [];
    ai = [];
    cardsContainer.style.display = "flex";
    teams.style.display = "none";
    btnReplay.style.display = "none";
    afficherCartes();
  };

  afficherCartes();
</script>
